# 基础

---

## 并行与并发的区别

- 并行：并行是在多处理器上同时刻处理多个任务
- 并发：并发是在单处理器上同时段处理多个任务

---

## 进程和线程的区别

进程|线程
-|-
进程是操作系统资源分配的基本单位|线程是处理器任务调度和执行的基本单位
进程之间的地址空间和资源是相互独立的|同一进程的线程共享本进程的地址空间和资源
一个进程崩溃后通常不会其他进程产生影响|一个线程崩溃会导致所属进程崩溃
进程可以独立执行|线程必须依附于一个正常运行的进程而执行

---

## 进程通信方式

- 匿名管道
- 命名管道
- 消息队列
- 信号量
- 共享内存
- 信号
- socket

---

## 线程通信方式

- 全局变量
- 互斥量
- 条件变量
- 信号量

---

## 死锁必要条件

- 互斥条件：一个资源每次只能被一个进程使用
- 请求和保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放
- 不可抢占条件：进程已获得的资源，在末使用完之前，不能强行剥夺，只能在进程使用完时由自己释放
- 循环等待条件：若干进程之间形成一种头尾相接的循环等待资源关系

---

## 自旋锁和互斥锁

- 互斥锁：线程会从sleep到running，过程中有上下文的切换，cpu的抢占，信号的发送等开销
- 自旋锁：线程一直是running，死循环检测锁的标志位，机制不复杂，主要用于SMP或内核可抢占下，因为在内核不可抢占下，cpu在执行空操作
- 互斥锁的起始原始开销要高于自旋锁，但是基本是一劳永逸，临界区持锁时间的大小并不会对互斥锁的开销造成影响，而自旋锁是死循环检测，加锁全程消耗cpu，起始开销虽然低于互斥锁，但是随着持锁时间，加锁的开销是线性增长

---
