# HTTP

---

## HTTP HTTPS

1. HTTP 的 URL 以 http:// 开头，而 HTTPS 的 URL 以 https:// 开头
2. HTTP 是不安全的，而 HTTPS 是安全的
3. HTTP 标准端口是80 ，而 HTTPS 的标准端口是443
4. 在 OSI 网络模型中，HTTP 工作于应用层，而 HTTPS 的安全传输机制工作在传输层
5. HTTP 无法加密，而 HTTPS 对传输的数据进行加密
6. HTTP 无需证书，而 HTTPS 需要CA机构wosign的颁发的SSL证书

---

## 无状态协议

无状态协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息当客户端一次HTTP请求完成以后，客户端再发送一次HTTP请求，HTTP并不知道当前客户端是一个老用户。可以使用Cookie来解决无状态的问题，Cookie就相当于一个通行证，第一次访问的时候给客户端发送一个Cookie，当客户端再次来的时候，拿着Cookie那么服务器就知道这个是老用户

---

## URI URL URN

- URI：统一资源标识符，用来唯一的标识一个资源
- URL：统一资源定位器，它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何定位这个资源
- URN：URN是URI的一种，用特定命名空间的名字标识资源，不包括访问方式

---

## HTTP常见方法

方法|说明
-|-
GET|用于请求访问已经被URI识别的资源，可以通过URL传参给服务器
POST|用于传输信息给服务器，主要功能与GET方法类似，但一般推荐使用POST方式
PUT|传输文件，报文主体中包含文件内容，保存到对应URI位置
HEAD|获得报文首部，与GET方法类似，只是不返回报文主体，一般用于验证URI是否有效
DELETE|删除文件，与PUT方法相反，删除对应URI位置的文件
OPTIONS|查询相应URI支持的HTTP方法

---

## HTTP状态码

状态码|说明
-|-
1**|临时响应并需要请求者继续执行操作
2**|请求成功。操作被成功接收接收并处理
3**|重定向代码，需要进一步的操作以完成请求
4**|客户端错误，请求包含语法错误或者无法完成请求
5**|服务器错误，服务器在处理请求的过程中发生错误

---

## HTTP过程

1. DNS域名解析
2. 发起TCP的3次握手
3. 建立TCP连接后发起http请求
4. 服务器响应http请求，浏览器得到html代码
5. 数据发送完成后关闭TCP连接
6. 浏览器解析html代码，并请求html代码中的资源
7. 浏览器对页面进行渲染呈现给用户

---

## HTTPS原理

首先采用CA证书认证服务器正确，采用非对称加密生成通信密钥，采用通信密钥进行通信

1. 客户端向服务端发送请求
2. 服务端返回CA证书以及公钥
3. 客户端审查证书，客户端生成随机值作为通信密钥并用服务端公钥进行非对称加密后发送给服务端
4. 服务端利用私钥进行非对称解密获取通信密钥
5. 客户端和服务端利用此密钥进行对称加密解密通信

### HTTP首部

### Connection

- keep-alive：使用此选项后，则与服务器进行长连接，在当前交互完成后不会关闭TCP连接。一般来说服务器会有一个最大请求次数和超时时间，达到最大请求次数或者超时时间，则会服务端会主动断开连接
- close：使用此选项后，则与服务器进行短连接，此次请求完毕之后立即断开连接

### Content-Length

在使用keep-alive后，由于短连接在连接断开后则可以知道此次响应的全部数据，而长连接不行，则需要指定这个选项，用于表示此次响应报文长度

### Transfer-Encoding

由于响应体长度有时无法确定其长度，则需要用该选项表示请求体是分块传输，则接受端可以申请较小的内存来分批存储请求体

---
