# 事务

Redis命令的执行是原子性的，但Redis没有在事务上增加任何维持原子性的机制，所以Redis事务的执行并不是原子性的。事务可以理解为一个打包的批量执行脚本，但批量指令并非原子化的操作，中间某条指令的失败不会导致前面已做指令的回滚，也不会造成后续的指令不做

## 事务保证

1. 批量操作在发送EXEC命令前被放入到队列缓存
2. 收到EXEC命令后进入事务执行，事务中任意命令执行失败，其余的命令依然被执行
3. 在事务执行过程中，其他客户端提交的命令不会插入到事务执行命令序列中

## 事务阶段

1. 开始事务
2. 命令入队
3. 执行事务

## 监视

在事务开始之前，监视一个多个变量，若在事务执行的过程中，被监视的变量发生改变，则事务将被打断，余下命令不执行
