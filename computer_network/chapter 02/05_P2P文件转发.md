# P2P文件转发

在客户-服务器文件分发中，该服务器必须向每个对等方发送该文件的副本，即服务器承受了极大的负担，并且消耗了大量的服务器带宽。在P2P文件分发中，每个对等方能够向任何其他对等方重新分发它已经收到的该文件的任何部分，从而在分发过程中协助该服务器。

## P2P体系结构的拓展性

P2P系统整体的上载能力等于服务器上载能力加上所有客户端上载能力，下载文件数量等于客户端的数量乘以文件大小。当客户端的数量极大时，最小文件分发时间将趋近于一个常数。

## BitTorrent

BitTorrent是一种用于文件分发的流行P2P协议。勇BitTorrent的术语来讲，参与一个特定文件分发的所有对等方的集合被称为一个洪流。在一个洪流中的对等发彼此下载等长度的文件块，典型的块长度为256KB。当一个对等方首次加入一个洪流时，它没有块。随着时间的流逝，它积累了越来越多的块。当它下载块时，也为其他对等方上载了多个块。

### 最稀缺优先技术

优先请求载洪流中副本数量最少的块，让数量最小的块得到更为迅速的重新分发，其目的是均衡每个块在洪流中的副本数量。

### 对换算法

对等方会测量洪流中其他对等发向其提供数据的邻居，给出其优先权，并确定最高流速的4个对等方，每10秒可能重新更改这四个对等方。每30秒随机向其他对等方发送块，若该对等方的速率够高，然后与该对等方进行交换，并将其加入到最高流速的4个对等方集合中，直到该对等方找到速率更快的对等方为止。