# 应用层协议原理

## 网络应用程序体系结构

### 客户-服务器体系结构

有一个总是打开的主机称之为服务器，它服务于来自许多其他称为客户的主机请求。
服务器具有固定的、周知的地址，该地址称之为IP地址。
客户相互之间并不直接通信。

### P2P体系结构

应用程序在间断的主机对之间使用直接通信。
P2P体系结构具有自拓展性，每个对等方通过向其他对等方分发文件也为系统增加服务能力。

## 进程通信

在两个不同端系统上的进程，通过跨越计算机网络交换报文而相互通信。

### 客户和服务器进程

网络应用程序有成对的进程组成，这些进程通过网络，相互发送报文。对没对通信进程，我们通常将这两个进程之一标示为客户，而另一个进程表示为服务器
在一对进程之间的通信绘画场景中，发起通信的进程被标识为客户，在会话开始时等待联系的进程是服务

### 进程与计算机网络之间的接口

进程通过一个称为套接字的软件接口向网络发送报文和接收报文。套接字也被称为应用程序和网络之间的应用程序编程接口。
应用程序开发者可以控制套接字在应用层的一切，但是对该套接字的运输层几乎没有控制权

### 进程寻址

在一台主机上运行的进程，为了向另一台主机上运行的进程，发送分组接收进程，需要有一个地址，为了标识该接受进场需要定义两种信息：一，主机的地址，二，在目的主机中指定接收进程的标识符。
目的主机由IP地址标识，目的主机上的目的进程由端口号标识。

## 可供应用程序使用的运输服务

### 1. 可靠数据传输

确保由应用程序的一端发送的数据正确、完全地交付给该应用程序的另一端。如果一个协议提供了这样的确保数据交付服务，就认为提供了可靠数据传输

### 2. 吞吐量

具有吞吐量要求的应用程序被称为带宽敏感的应用。能够根据当时可用的带宽或多或少地利用可供使用的吞吐量的饮用程序被称为弹性应用

### 3. 定时

在交互性较高的应用程序中，在做出动作并看到来自环境的响应之间，较长的时延使得它失去真实感。这些服务为了有效性而要求数据交付有严格的时间限制。

### 4. 安全性

运输协议能够为应用程序提供一种或多种安全性服务，这种服务将在发送和接收进程之间提供机密性，以防该数据以某种方式在这两个进程之间被观察到。运输协议还能提供除了机密性以外的其他安全性服务，包括数据完整性和端点鉴别。

## 英特网提供的运输服务

### TCP服务

#### 1. 面向连接服务

通信前需要建立连接

#### 2. 可靠的数据传送服务

可以无差错顺序的及交付所有发送的数据

### UDP服务

#### 1. 面向字节流服务

通信前无需建立连接

#### 2. 不可靠数据传送服务

数据可能顺序颠倒甚至丢失

### 英特网运输协议不提供的服务

英特网通常能够为时间敏感应用程序提供满意的服务，但它不能提供任何定时或带宽保证

## 应用层协议

应用层协议定义运行在不同端系统上的应用程序进程如何相互传递报文。特别定义了：

1. 交换的报文类型，例如请求报文和响应报文
2. 各种报文类型的语法，如报文中的各个字段及这些字段是如何描述的
3. 字段的语义，即这些字段中的信息的含义
4. 确定一个进程何时及如何发送报文，对报文进行响应的规则
